//
//  main.c
//  lab6
//
//  Created by Amin Benarieb on 18/11/15.
//  Copyright ¬© 2015 Amin Benarieb. All rights reserved.
//

/*
 
 1) –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º –∑–∞–¥–∞–Ω–∏—è:
     üîµ –í —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–∞—Ç–∞–ª–æ–≥ —Ñ–∞–π–ª–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞. –ö–∞–∂–¥—ã–π —É–∑–µ–ª –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–º—è –∏ –∞—Ç—Ä–∏–±—É—Ç—ã —Ñ–∞–π–ª–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Ñ–∞–π–ª—É.
     üîµ –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ö–æ–¥–∏—Ç –¥–µ—Ä–µ–≤–æ –∏ —É–¥–∞–ª—è–µ—Ç –∏–∑ –Ω–µ–≥–æ –≤—Å–µ —Ñ–∞–π–ª—ã, –ø–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –¥–∞—Ç—ã. –í—ã–≤–µ—Å—Ç–∏ –∏—Å—Ö–æ–¥–Ω–æ–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤—å—è –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞.
 
 2) üîµ –í—ã–≤–µ—Å—Ç–∏ –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞.
 3) –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –¥–µ—Ä–µ–≤–æ–º:
     üîµ –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞
     üîµ –≤–∫–ª—é—á–µ–Ω–∏–µ
     üîµ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
     –º –ø–æ–∏—Å–∫ —É–∑–ª–æ–≤
 
 4) üîµ –°—Ä–∞–≤–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ –ø–æ–∏—Å–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã—Å–æ—Ç—ã –¥–µ—Ä–µ–≤–∞ –∏ —Å—Ç–µ–ø–µ–Ω–∏ –µ–≥–æ –≤–µ—Ç–≤–ª–µ–Ω–∏—è.


 –£–∫–∞–∑–∞–Ω–∏—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã
 –í—Å–µ –ª–æ–≥–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–≤–≤–æ–¥, –≤—ã–≤–æ–¥, –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞, –≤–∫–ª—é—á–µ–Ω–∏–µ —É–∑–ª–∞, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —É–∑–ª–∞ –∏ —Ç.–ø.) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –≤ –≤–∏–¥–µ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º.
 
 –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å–ª–µ–¥—É–µ—Ç –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å:
 üîµ	—É–∫–∞–∑–∞–Ω–∏–µ —Ç–∏–ø–∞, —Ñ–æ—Ä–º–∞—Ç–∞ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –≤–≤–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö,
 üîµ	—É–∫–∞–∑–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π, –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–æ–π,
 üîµ	–Ω–∞–ª–∏—á–∏–µ –ø–æ—è—Å–Ω–µ–Ω–∏–π –ø—Ä–∏ –≤—ã–≤–æ–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞,
 üîµ	–≤—ã–≤–æ–¥ –¥–µ—Ä–µ–≤–∞ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –≤–∏–¥–µ (–∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–Ω—É—é –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞).
 
 –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
 üîµ	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç.–µ. –∏—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±—É–µ–º–æ–º—É —Ç–∏–ø—É –∏ —Ñ–æ—Ä–º–∞—Ç—É). –û–±–µ—Å–ø–µ—á–∏—Ç—å –∞–¥–µ–∫–≤–∞—Ç–Ω—É—é —Ä–µ–∞–∫—Ü–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –Ω–µ–≤–µ—Ä–Ω—ã–π –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö;
 üîµ	–æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (¬´–ø—É—Å—Ç–æ–π –≤–≤–æ–¥¬ª);
 üîµ	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π;
 üîµ	–æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–∑–ª–∞ –≤ –ø—É—Å—Ç–æ–µ –¥–µ—Ä–µ–≤–æ;
 üîµ	–ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–µ–Ω–∏—è —É–∑–ª–∞ –∏–∑ –ø—É—Å—Ç–æ–≥–æ –¥–µ—Ä–µ–≤–∞;
 üåï	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —É–∑–ª–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –¥–µ—Ä–µ–≤–æ;
 üîµ	–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —É–∑–ª–∞ –∏ –ø–æ–∏—Å–∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —É–∑–ª–∞ –≤ –¥–µ—Ä–µ–≤–µ;
 üî¥	—Å–æ–∑–¥–∞—Ç—å –ª–µ–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –∏–ª–∏ –ø—Ä–∞–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –¥–µ—Ä–µ–≤–æ, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–∑–ª–∞ –≤ –Ω–µ–º:
 
 */

#include <stdio.h>
#include "core.h"

int main(void)
{
    tnode *tree = NULL;
    char raw_input[BUFFER_MAX_SIZE+1];
    int input;
    int errorCode = 0;
    
    do
    {
        input = -1;
        system("clear");
        show_menu();
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—à–∏–±–∫–∏
        if (errorCode)
            show_error_message(errorCode);

        printf("‚ù± ");
        scanf("%s", raw_input);
        
        // –í–≤–æ–¥–∞
        if (is_number(raw_input))
        {
            input = atoi(raw_input);
            if (input > 9)
            {
                errorCode = 1;
                continue;
            }
            
            errorCode = 0;
            handle_action(input, &tree);
        }
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ –≤–≤–æ–¥–∞ (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç :) )
        else if (*raw_input == ' ' || *raw_input == '\n')
            errorCode = 2;
        else
            errorCode = 1;
        
    }
    while (*raw_input != '0');
    
    // –û—á–∏—â–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞
    apply_pre(tree, free_node, NULL);
    
    return 0;
}
